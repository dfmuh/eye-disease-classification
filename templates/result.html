<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
    <script
      src="https://kit.fontawesome.com/261e0327c1.js"
      crossorigin="anonymous"
    ></script>

    <title>Eye Disease Classification</title>
    <link rel="stylesheet" href="../static/style.css" />
  </head>
  <body>
    <nav
      class="navbar navbar-expand-lg navbar-light sticky-top shadow-sm bgbody"
    >
      <div class="container">
        <h4>Eye Disease Classification</h4>
      </div>
    </nav>
    <section id="section-body" class="d-flex align-items-center">
      <div class="container text-center">
        <div class="container text-center">
          <h1 class="mt-4">Classification Result</h1>
        </div>
        <div id="image-container" class="mt-4">
          <img
            src="{{ url_for('static', filename='grad_cam/'+filename) }}"
            alt="error"
          />
        </div>
        <div class="container text-center mt-3">
          <h4>Result : {{prediction}}</h4>
          <h4>Probability : {{prob}}%</h4>
        </div>
      </div>
      <div id="back-button">
        <a href="/"> <i class="fas fa-arrow-left"></i> Back </a>
      </div>
    </section>
  </body>
</html>

<script>
  const imageContainer = document.getElementById("image-container");
  const image = imageContainer.querySelector("img");

  image.onload = function () {
    const containerWidth = imageContainer.offsetWidth;
    const containerHeight = imageContainer.offsetHeight;

    const aspectRatio = this.width / this.height;

    let newWidth, newHeight;
    if (containerWidth / aspectRatio <= containerHeight) {
      newWidth = containerWidth;
      newHeight = newWidth / aspectRatio;
    } else {
      newHeight = containerHeight;
      newWidth = newHeight * aspectRatio;
    }

    image.style.width = `${newWidth}px`;
    image.style.height = `${newHeight}px`;
  };
</script>
